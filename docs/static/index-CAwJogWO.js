import{_ as F,C as D,d as I,r as m,b as S,v as x,y as f,c,o as i,f as e,k as h,H as z,I as L,l as T,m as n,F as V,D as $,G as A,A as u,s as B,t as K}from"./index-CqU5sET7.js";import{b as U,c as M}from"./travelNotesUser-B8bKppJE.js";const a=l=>(B("data-v-cf1b6bff"),l=l(),K(),l),j={class:"travel-notes-plaza"},q={class:"plaza-header"},E={class:"container"},G=a(()=>e("h1",{class:"plaza-title"},"旅行游记广场",-1)),H={class:"search-container"},O=a(()=>e("i",{class:"icon-search"},null,-1)),J=a(()=>e("i",{class:"icon-pencil"},null,-1)),P={key:0,class:"featured-tag"},Q=a(()=>e("span",null,"推荐游记",-1)),R=[Q],W={class:"notes-container container"},X={class:"notes-grid"},Y={class:"note-cover"},Z=["src","alt"],ee={key:0,class:"featured-badge"},te=a(()=>e("i",{class:"icon-star"},null,-1)),se={class:"note-info"},oe={class:"note-title"},ae={class:"note-meta"},ne={class:"meta-item"},ce=a(()=>e("i",{class:"icon-eye"},null,-1)),ie={class:"meta-item"},re=a(()=>e("i",{class:"icon-heart"},null,-1)),le={class:"meta-item"},de=a(()=>e("i",{class:"icon-calendar"},null,-1)),ue={class:"note-actions"},_e=["onClick"],he=a(()=>e("i",{class:"icon-arrow-right"},null,-1)),pe={key:0,class:"empty-state"},ve=a(()=>e("i",{class:"icon-empty"},null,-1)),me=a(()=>e("p",null,"没有找到相关游记",-1)),fe=[ve,me],ge=D({name:"travelNotes"}),ye=Object.assign(ge,{setup(l){const{proxy:_}=I(),d=m([]),r=m(""),g=S().id;function y(){U({pageNum:1,pageSize:100,status:2}).then(t=>{d.value=t.rows.sort((o,s)=>s.isFeatured!==o.isFeatured?s.isFeatured-o.isFeatured:new Date(s.createdAt)-new Date(o.createdAt))})}x(()=>{y()});const p=f(()=>{if(!r.value)return d.value;const t=r.value.trim().toLowerCase();return d.value.filter(o=>o.title.toLowerCase().includes(t))}),C=f(()=>d.value.some(t=>t.isFeatured===1));function w(t){return t?t.split(",")[0]:"https://picsum.photos/400/300?grayscale&blur=2"}function N(t){return t?new Date(t).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"}):""}function v(){console.log("搜索关键词:",r.value)}function k(t){M(t).then(o=>{o.code===200&&(console.log("添加浏览次数成功"),_.$router.push(`/travel-note/${t}`))}).catch(o=>{_.$message.error("新增浏览量时出错："+o.message),console.log("添加浏览次数失败")}),console.log("查看游记详情:",t)}function b(){console.log("前往创建游记页面"),_.$router.push({path:"/travel-note/create",query:{userId:g}})}return(t,o)=>(i(),c("div",j,[e("header",q,[e("div",E,[G,e("div",H,[z(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>r.value=s),placeholder:"搜索游记标题...",class:"search-input",onKeyup:T(v,["enter"])},null,544),[[L,r.value]]),e("button",{class:"search-btn",onClick:v},[O,n(" 搜索 ")])]),e("button",{class:"create-btn",onClick:b},[J,n(" 我也要写游记 ")])])]),C.value?(i(),c("div",P,R)):h("",!0),e("main",W,[e("div",X,[(i(!0),c(V,null,$(p.value,s=>(i(),c("div",{class:A(["note-card",{"featured-note":s.isFeatured===1}]),key:s.noteId},[e("div",Y,[e("img",{src:w(s.coverImage),alt:s.title,class:"cover-img",loading:"lazy"},null,8,Z),s.isFeatured===1?(i(),c("span",ee,[te,n(" 推荐 ")])):h("",!0)]),e("div",se,[e("h3",oe,u(s.title),1),e("div",ae,[e("span",ne,[ce,n(" "+u(s.viewCount),1)]),e("span",ie,[re,n(" "+u(s.likeCount),1)]),e("span",le,[de,n(" "+u(N(s.createdAt)),1)])])]),e("div",ue,[e("button",{class:"read-more",onClick:we=>k(s.noteId)},[n(" 去看看 "),he],8,_e)])],2))),128))]),p.value.length===0?(i(),c("div",pe,fe)):h("",!0)])]))}}),be=F(ye,[["__scopeId","data-v-cf1b6bff"]]);export{be as default};
