import{_ as ee,C as te,d as ae,r as c,O as oe,T as le,e as r,R as ne,c as I,o as p,H as _,h as e,f as v,S as q,B as t,i as a,l as re,m as u,j as C,P as A,F as se,D as de,A as B}from"./index-Lq3EucIc.js";import{l as ie,g as ue,d as ce,u as pe,a as me}from"./productCategories-C2FEYqLD.js";const ge={class:"app-container"},_e={class:"category-grid"},fe={class:"card-image"},ve={class:"card-content"},ye={class:"card-title"},Ce={class:"card-time"},he={class:"card-actions"},be={class:"dialog-footer"},we=te({name:"ProductCategories"}),ke=Object.assign(we,{setup(Ve){const{proxy:m}=ae(),D=c([]),g=c(!1),R=c(!0),w=c(!0),U=c([]),F=c(!0),T=c(!0),V=c(0),x=c(""),E=oe({form:{},queryParams:{pageNum:1,pageSize:10,categoryId:null,name:null},rules:{name:[{required:!0,message:"分类名称不能为空",trigger:"blur"}],sortOrder:[{required:!0,message:"排序不能为空",trigger:"blur"}]}}),{queryParams:s,form:n,rules:z}=le(E);function f(){R.value=!0,ie(s.value).then(d=>{D.value=d.rows,V.value=d.total,R.value=!1})}function L(){g.value=!1,S()}function S(){n.value={categoryId:null,name:null,icon:null,sortOrder:null,createdAt:null,updatedAt:null},m.resetForm("productCategoriesRef")}function P(){s.value.pageNum=1,f()}function Q(){m.resetForm("queryRef"),P()}function j(){S(),g.value=!0,x.value="添加产品分类"}function $(d){S();const o=d.categoryId||U.value;ue(o).then(h=>{n.value=h.data,g.value=!0,x.value="修改产品分类"})}function K(){m.$refs.productCategoriesRef.validate(d=>{d&&(n.value.categoryId!=null?pe(n.value).then(o=>{m.$modal.msgSuccess("修改成功"),g.value=!1,f()}):me(n.value).then(o=>{m.$modal.msgSuccess("新增成功"),g.value=!1,f()}))})}function N(d){const o=d.categoryId||U.value;m.$modal.confirm('是否确认删除产品分类编号为"'+o+'"的数据项？').then(function(){return ce(o)}).then(()=>{f(),m.$modal.msgSuccess("删除成功")}).catch(()=>{})}function H(){m.download("manage/productCategories/export",{...s.value},`productCategories_${new Date().getTime()}.xlsx`)}return f(),(d,o)=>{const h=r("el-input"),b=r("el-form-item"),i=r("el-button"),O=r("el-form"),k=r("el-col"),G=r("right-toolbar"),J=r("el-row"),M=r("image-preview"),W=r("pagination"),X=r("image-upload"),Y=r("el-dialog"),y=ne("hasPermi");return p(),I("div",ge,[_(e(O,{model:t(s),ref:"queryRef",inline:!0,"label-width":"68px"},{default:a(()=>[e(b,{label:"分类名称",prop:"name"},{default:a(()=>[e(h,{modelValue:t(s).name,"onUpdate:modelValue":o[0]||(o[0]=l=>t(s).name=l),placeholder:"请输入分类名称",clearable:"",onKeyup:re(P,["enter"])},null,8,["modelValue"])]),_:1}),e(b,null,{default:a(()=>[e(i,{type:"primary",icon:"Search",onClick:P},{default:a(()=>[u("搜索")]),_:1}),e(i,{icon:"Refresh",onClick:Q},{default:a(()=>[u("重置")]),_:1})]),_:1})]),_:1},8,["model"]),[[q,t(w)]]),e(J,{gutter:10,class:"mb8"},{default:a(()=>[e(k,{span:1.5},{default:a(()=>[_((p(),C(i,{type:"primary",plain:"",icon:"Plus",onClick:j},{default:a(()=>[u("新增")]),_:1})),[[y,["manage:productCategories:add"]]])]),_:1}),e(k,{span:1.5},{default:a(()=>[_((p(),C(i,{type:"success",plain:"",icon:"Edit",disabled:t(F),onClick:$},{default:a(()=>[u("修改")]),_:1},8,["disabled"])),[[y,["manage:productCategories:edit"]]])]),_:1}),e(k,{span:1.5},{default:a(()=>[_((p(),C(i,{type:"danger",plain:"",icon:"Delete",disabled:t(T),onClick:N},{default:a(()=>[u("删除")]),_:1},8,["disabled"])),[[y,["manage:productCategories:remove"]]])]),_:1}),e(k,{span:1.5},{default:a(()=>[_((p(),C(i,{type:"warning",plain:"",icon:"Download",onClick:H},{default:a(()=>[u("导出")]),_:1})),[[y,["manage:productCategories:export"]]])]),_:1}),e(G,{showSearch:t(w),"onUpdate:showSearch":o[1]||(o[1]=l=>A(w)?w.value=l:null),onQueryTable:f},null,8,["showSearch"])]),_:1}),v("div",_e,[(p(!0),I(se,null,de(t(D),l=>(p(),I("div",{class:"category-card",key:l.categoryId},[v("div",fe,[e(M,{src:l.icon,width:100,height:100},null,8,["src"])]),v("div",ve,[v("div",ye,B(l.name),1),v("div",Ce,B(d.parseTime(l.createdAt,"{y}-{m}-{d}")),1),v("div",he,[_((p(),C(i,{link:"",type:"primary",icon:"Edit",onClick:Z=>$(l)},{default:a(()=>[u("修改")]),_:2},1032,["onClick"])),[[y,["manage:productCategories:edit"]]]),_((p(),C(i,{link:"",type:"danger",icon:"Delete",onClick:Z=>N(l)},{default:a(()=>[u("删除")]),_:2},1032,["onClick"])),[[y,["manage:productCategories:remove"]]])])])]))),128))]),_(e(W,{total:t(V),page:t(s).pageNum,"onUpdate:page":o[2]||(o[2]=l=>t(s).pageNum=l),limit:t(s).pageSize,"onUpdate:limit":o[3]||(o[3]=l=>t(s).pageSize=l),onPagination:f},null,8,["total","page","limit"]),[[q,t(V)>0]]),e(Y,{title:t(x),modelValue:t(g),"onUpdate:modelValue":o[7]||(o[7]=l=>A(g)?g.value=l:null),width:"500px","append-to-body":""},{footer:a(()=>[v("div",be,[e(i,{type:"primary",onClick:K},{default:a(()=>[u("确 定")]),_:1}),e(i,{onClick:L},{default:a(()=>[u("取 消")]),_:1})])]),default:a(()=>[e(O,{ref:"productCategoriesRef",model:t(n),rules:t(z),"label-width":"80px"},{default:a(()=>[e(b,{label:"分类名称",prop:"name"},{default:a(()=>[e(h,{modelValue:t(n).name,"onUpdate:modelValue":o[4]||(o[4]=l=>t(n).name=l),placeholder:"请输入分类名称"},null,8,["modelValue"])]),_:1}),e(b,{label:"图片",prop:"icon"},{default:a(()=>[e(X,{modelValue:t(n).icon,"onUpdate:modelValue":o[5]||(o[5]=l=>t(n).icon=l)},null,8,["modelValue"])]),_:1}),e(b,{label:"排序",prop:"sortOrder"},{default:a(()=>[e(h,{modelValue:t(n).sortOrder,"onUpdate:modelValue":o[6]||(o[6]=l=>t(n).sortOrder=l),placeholder:"请输入排序"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}}),Pe=ee(ke,[["__scopeId","data-v-f33f7244"]]);export{Pe as default};
