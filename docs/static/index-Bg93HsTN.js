import{_ as V,C as B,bN as E,d as U,a as z,b as F,r as g,y as M,v as q,c as l,o as r,f as t,F as C,D as k,G as A,m as h,A as n,k as I,s as j,t as G}from"./index-CqU5sET7.js";import{b as H,u as O}from"./travelNotesUser-B8bKppJE.js";const i=_=>(j("data-v-bbbc1849"),_=_(),G(),_),R={class:"page-background"},J={class:"travel-notes-container"},K=i(()=>t("div",{class:"page-header"},[t("h1",null,"我的游记"),t("p",null,"记录每一段难忘的旅程")],-1)),P={class:"status-filter"},Q=["onClick"],W={class:"count-badge"},X={class:"notes-list"},Y={key:0,class:"empty-state"},Z=i(()=>t("img",{src:"https://picsum.photos/seed/empty/200/200",alt:"暂无数据",class:"empty-img"},null,-1)),tt={class:"note-cover"},et=["src","alt"],st={class:"status-tag"},ot={class:"note-content"},nt={class:"note-title"},at={class:"note-meta"},ct={class:"meta-item"},lt=i(()=>t("i",{class:"icon-view"},null,-1)),rt={class:"meta-item"},it=i(()=>t("i",{class:"icon-like"},null,-1)),ut={class:"meta-item"},dt=i(()=>t("i",{class:"icon-time"},null,-1)),_t={class:"note-desc"},ht={class:"note-actions"},pt=["onClick"],vt=["onClick"],mt=["onClick"],ft=i(()=>t("i",{class:"icon-plus"},null,-1)),bt=[ft],gt=B({name:"myTravelNote"}),Ct=Object.assign(gt,{setup(_){E(e=>({fd1c61d4:a[0].color,"2d5a0816":a[1].color,"513428d4":a[2].color,"8dd5549a":a[3].color}));const{proxy:v}=U(),N=z(),p=F().id,u=g([]),d=g("all"),a={all:{label:"全部",color:"#666"},0:{label:"草稿",color:"#999"},1:{label:"待审核",color:"#ff9800"},2:{label:"审核通过",color:"#4caf50"},3:{label:"驳回",color:"#f44336"}};function m(){H({pageNum:1,pageSize:1e4,userId:p}).then(e=>{u.value=e.rows})}const f=M(()=>d.value==="all"?u.value:u.value.filter(e=>e.status===Number(d.value)));function y(e){return e==="all"?u.value.length:u.value.filter(o=>o.status===Number(e)).length}function x(e){return e?e.split(",")[0]:"https://picsum.photos/seed/default/400/300"}function S(e){return e?new Date(e).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"}):""}function T(e){if(!e)return"无内容";const o=document.createElement("div");o.innerHTML=e;const s=o.textContent||o.innerText||"";return s.length>100?s.slice(0,100)+"...":s}function w(e){switch(e){case 0:return"去发布";case 1:case 2:return"去修改";case 3:return"重新编辑";default:return"编辑"}}function D(e){N.push(`/travel-note/${e}`)}function $(e,o){v.$router.push({path:"/travel-note/create",query:{userId:p,noteId:e}})}function L(e){confirm("确定要下架这篇游记吗？")&&O({noteId:e,status:3}).then(o=>{o.code===200?(alert("游记已下架"),m()):alert("操作失败")}).catch(()=>{alert("操作失败")})}function b(){v.$router.push({path:"/travel-note/create",query:{userId:p}})}return q(()=>{m()}),(e,o)=>(r(),l("div",R,[t("div",J,[K,t("div",P,[(r(),l(C,null,k(a,(s,c)=>t("button",{key:c,onClick:It=>d.value=c,class:A({active:d.value===c})},[h(n(s.label)+" ",1),t("span",W,n(y(c)),1)],10,Q)),64))]),t("div",X,[f.value.length===0?(r(),l("div",Y,[Z,t("p",null,"暂无"+n(a[d.value].label)+"的游记",1),t("button",{class:"create-btn",onClick:b},"+ 创建新游记")])):I("",!0),(r(!0),l(C,null,k(f.value,s=>(r(),l("div",{class:"note-card",key:s.noteId},[t("div",tt,[t("img",{src:x(s.coverImage),alt:s.title,class:"cover-img"},null,8,et),t("span",st,n(a[s.status].label),1)]),t("div",ot,[t("h3",nt,n(s.title),1),t("div",at,[t("span",ct,[lt,h(" "+n(s.viewCount)+" 浏览 ",1)]),t("span",rt,[it,h(" "+n(s.likeCount)+" 点赞 ",1)]),t("span",ut,[dt,h(" "+n(S(s.createdAt)),1)])]),t("p",_t,n(T(s.content)),1)]),t("div",ht,[t("button",{class:"action-btn view-btn",onClick:c=>D(s.noteId)}," 查看详情 ",8,pt),t("button",{class:"action-btn edit-btn",onClick:c=>$(s.noteId,s.status)},n(w(s.status)),9,vt),s.status===2?(r(),l("button",{key:0,class:"action-btn下架-btn",onClick:c=>L(s.noteId)}," 下架文章 ",8,mt)):I("",!0)])]))),128))]),t("button",{class:"float-create-btn",onClick:b},bt)])]))}}),xt=V(Ct,[["__scopeId","data-v-bbbc1849"]]);export{xt as default};
