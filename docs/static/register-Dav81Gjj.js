import{_ as U,a as z,d as B,r as u,v as K,e as c,c as _,f as o,m as x,h as e,i as t,j as N,k as S,l as b,o as d,n as T,p as $,s as L,t as j,x as A,E as D}from"./index-CqU5sET7.js";const F="/nskk-travel-agency-vue/static/registerbackground-D2Ll6Ych.mp4",k=g=>(L("data-v-7719bd7c"),g=g(),j(),g),H={class:"register-container"},Y={key:0},G={key:1},J={class:"video-bg"},O=["muted"],Q=k(()=>o("source",{src:F,type:"video/mp4"},null,-1)),W={class:"register-wrapper"},X=k(()=>o("div",{class:"form-header"},[o("h3",{class:"title"},"纳斯卡可旅行社"),o("p",{class:"subtitle"},"创建您的账户，开启旅行之旅")],-1)),Z={class:"register-code"},ee=["src"],se={key:0},oe={key:1},te={style:{float:"right","margin-top":"15px"}},ae=k(()=>o("div",{class:"el-register-footer"},[o("span",null,"Copyright © 2018-2023 ruoyi.vip All Rights Reserved.")],-1)),le={__name:"register",setup(g){const C=z(),{proxy:q}=B(),s=u({username:"",password:"",confirmPassword:"",code:"",uuid:""}),p=u(null),i=u(!0);function E(){console.log("切换静音状态：",i.value),i.value=!i.value,p.value&&(p.value.muted=i.value)}const P={username:[{required:!0,trigger:"blur",message:"请输入您的账号"},{min:2,max:20,message:"用户账号长度必须介于 2 和 20 之间",trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"请输入您的密码"},{min:5,max:20,message:"用户密码长度必须介于 5 和 20 之间",trigger:"blur"}],confirmPassword:[{required:!0,trigger:"blur",message:"请再次输入您的密码"},{required:!0,validator:(l,a,r)=>{s.value.password!==a?r(new Error("两次输入的密码不一致")):r()},trigger:"blur"}],code:[{required:!0,trigger:"change",message:"请输入验证码"}]},V=u(""),f=u(!1),v=u(!0);function h(){q.$refs.registerRef.validate(l=>{l&&(f.value=!0,A(s.value).then(a=>{const r=s.value.username;D.alert(`<font color='red'>恭喜你，您的账号 ${r} 注册成功！</font>`,"系统提示",{dangerouslyUseHTMLString:!0,type:"success"}).then(()=>{C.push("/login")}).catch(()=>{})}).catch(()=>{f.value=!1,v.value&&w()}))})}function w(){$().then(l=>{v.value=l.captchaEnabled===void 0?!0:l.captchaEnabled,v.value&&(V.value="data:image/gif;base64,"+l.img,s.value.uuid=l.uuid)})}return K(()=>{w(),p.value&&p.value.play().catch(l=>{console.log("自动播放失败:",l)})}),(l,a)=>{const r=c("svg-icon"),y=c("el-input"),m=c("el-form-item"),R=c("el-button"),I=c("router-link"),M=c("el-form");return d(),_("div",H,[o("button",{class:"mute-btn",onClick:E},[i.value?(d(),_("span",Y,"🔇")):(d(),_("span",G,"🔊"))]),o("div",J,[o("video",{ref_key:"backgroundVideo",ref:p,autoplay:"",loop:"",muted:i.value,playsinline:"",class:"bg-video"},[Q,x(" 您的浏览器不支持视频标签 ")],8,O)]),o("div",W,[e(M,{ref:"registerRef",model:s.value,rules:P,class:"register-form"},{default:t(()=>[X,e(m,{prop:"username"},{default:t(()=>[e(y,{modelValue:s.value.username,"onUpdate:modelValue":a[0]||(a[0]=n=>s.value.username=n),type:"text",size:"large","auto-complete":"off",placeholder:"账号",class:"custom-input"},{prefix:t(()=>[e(r,{"icon-class":"user",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"])]),_:1}),e(m,{prop:"password"},{default:t(()=>[e(y,{modelValue:s.value.password,"onUpdate:modelValue":a[1]||(a[1]=n=>s.value.password=n),type:"password",size:"large","auto-complete":"off",placeholder:"密码",onKeyup:b(h,["enter"]),class:"custom-input"},{prefix:t(()=>[e(r,{"icon-class":"password",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"])]),_:1}),e(m,{prop:"confirmPassword"},{default:t(()=>[e(y,{modelValue:s.value.confirmPassword,"onUpdate:modelValue":a[2]||(a[2]=n=>s.value.confirmPassword=n),type:"password",size:"large","auto-complete":"off",placeholder:"确认密码",onKeyup:b(h,["enter"]),class:"custom-input"},{prefix:t(()=>[e(r,{"icon-class":"password",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"])]),_:1}),v.value?(d(),N(m,{key:0,prop:"code"},{default:t(()=>[e(y,{size:"large",modelValue:s.value.code,"onUpdate:modelValue":a[3]||(a[3]=n=>s.value.code=n),"auto-complete":"off",placeholder:"验证码",style:{width:"63%"},onKeyup:b(h,["enter"]),class:"custom-input"},{prefix:t(()=>[e(r,{"icon-class":"validCode",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"]),o("div",Z,[o("img",{src:V.value,onClick:w,class:"register-code-img"},null,8,ee)])]),_:1})):S("",!0),e(m,{style:{width:"100%"}},{default:t(()=>[e(R,{loading:f.value,size:"large",type:"primary",style:{width:"100%"},onClick:T(h,["prevent"]),class:"register-btn"},{default:t(()=>[f.value?(d(),_("span",oe,"注 册 中...")):(d(),_("span",se,"注 册"))]),_:1},8,["loading"]),o("div",te,[e(I,{class:"link-type",to:"/login"},{default:t(()=>[x("使用已有账户登录")]),_:1})])]),_:1})]),_:1},8,["model"])]),ae])}}},ie=U(le,[["__scopeId","data-v-7719bd7c"]]);export{ie as default};
