import{C as j,aU as h,e as a,r as C,w as z,j as p,o as f,i as d,f as y,B as v,n as g,G as k,h as b,A}from"./index-Lq3EucIc.js";import{d as B}from"./vuedraggable.common-B0JwQsbg.js";import{m as O}from"./index-CZUA5vYs.js";const F=O("accept,accept-charset,accesskey,action,align,alt,async,autocomplete,autofocus,autoplay,autosave,bgcolor,border,buffered,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,http-equiv,name,contenteditable,contextmenu,controls,coords,data,datetime,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,method,for,form,formaction,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,ismap,itemprop,keytype,kind,label,lang,language,list,loop,low,manifest,max,maxlength,media,method,GET,POST,min,multiple,email,file,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,seamless,selected,shape,size,type,text,password,sizes,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,type,usemap,value,width,wrapprefix-icon"),E=O("layout,prepend,regList,tag,document,changeTag,defaultValue"),L={"el-button":{default(e,t,l){return t[l]}},"el-select":{options(e,t,l){return t.options.map(n=>e(a("el-option"),{label:n.label,value:n.value}))}},"el-radio-group":{options(e,t,l){return t.optionType==="button"?t.options.map(n=>e(a("el-checkbox-button"),{label:n.value},()=>n.label)):t.options.map(n=>e(a("el-radio"),{label:n.value,border:t.border},()=>n.label))}},"el-checkbox-group":{options(e,t,l){return t.optionType==="button"?t.options.map(n=>e(a("el-checkbox-button"),{label:n.value},()=>n.label)):t.options.map(n=>e(a("el-checkbox"),{label:n.value,border:t.border},()=>n.label))}},"el-upload":{"list-type":(e,t,l)=>{const n={};return t["list-type"]==="picture-card"?e(a("el-icon"),n,()=>e(a("Plus"))):(n.type="primary",n.icon="Upload",e(a("el-button"),n,()=>t.buttonText))}}},U={"el-upload":{tip:(e,t,l)=>{if(t.showTip)return()=>e("div",{class:"el-upload__tip"},"只能上传不超过"+t.fileSize+t.sizeUnit+"的"+t.accept+"文件")}}},G=j({render(){const e={attrs:{},props:{},on:{},style:{}},t=JSON.parse(JSON.stringify(this.conf)),l=[],n={},u=L[t.tag];u&&Object.keys(u).forEach(o=>{const r=u[o];t[o]&&l.push(r(h,t,o))});const m=U[t.tag];return m&&Object.keys(m).forEach(o=>{const r=m[o];t[o]&&(n[o]=r(h,t,o))}),Object.keys(t).forEach(o=>{const r=t[o];e[o]?e[o]=r:F(o)?e.attrs[o]=r:E(o)||(e.props[o]=r)}),l.length>0&&(n.default=()=>l),h(a(this.conf.tag),{modelValue:this.$attrs.modelValue,...e.props,...e.attrs,style:{...e.style}},n??null)},props:{conf:{type:Object,required:!0}}}),P={class:"component-name"},J=j({name:"DraggableItem"}),K=Object.assign(J,{props:{element:Object,index:Number,drawingList:Array,activeId:{type:[String,Number]},formConf:Object},emits:["activeItem","copyItem","deleteItem"],setup(e,{emit:t}){const l=e,n=C(""),u=C(null),m=t;function o(c){m("activeItem",c)}function r(c,i){m("copyItem",c,i??l.drawingList)}function w(c,i){m("deleteItem",c,i??l.drawingList)}function V(){return{gutter:l.element.gutter,justify:l.element.justify,align:l.element.align}}return z(()=>l.activeId,c=>{n.value=(l.element.layout==="rowFormItem"?"drawing-row-item":"drawing-item")+(c===l.element.formId?" active-from-item":""),l.formConf.unFocusedComponentBorder&&(n.value+=" unfocus-bordered")},{immediate:!0}),(c,i)=>{const D=a("el-form-item"),N=a("draggable-item",!0),$=a("el-row"),q=a("CopyDocument"),I=a("el-icon"),S=a("Delete"),T=a("el-col");return f(),p(T,{span:e.element.span,class:k(v(n)),onClick:i[4]||(i[4]=g(s=>o(e.element),["stop"]))},{default:d(()=>[e.element.layout==="colFormItem"?(f(),p(D,{key:0,label:e.element.label,"label-width":e.element.labelWidth?e.element.labelWidth+"px":null,required:e.element.required},{default:d(()=>[(f(),p(v(G),{key:e.element.tag,conf:e.element,modelValue:e.element.defaultValue,"onUpdate:modelValue":i[0]||(i[0]=s=>e.element.defaultValue=s)},null,8,["conf","modelValue"]))]),_:1},8,["label","label-width","required"])):(f(),p($,{key:1,gutter:e.element.gutter,class:k(e.element.class),onClick:i[1]||(i[1]=g(s=>o(e.element),["stop"]))},{default:d(()=>[y("span",P,A(e.element.componentName),1),b(v(B),{group:"componentsGroup",animation:340,list:e.element.children,class:"drag-wrapper","item-key":"label",ref_key:"draggableItemRef",ref:u,"component-data":V()},{item:d(s=>[(f(),p(N,{key:s.element.renderKey,"drawing-list":e.element.children,element:s.element,index:e.index,"active-id":e.activeId,"form-conf":e.formConf,onActiveItem:x=>o(s.element),onCopyItem:x=>r(s.element,e.element.children),onDeleteItem:x=>w(s.index,e.element.children)},null,8,["drawing-list","element","index","active-id","form-conf","onActiveItem","onCopyItem","onDeleteItem"]))]),_:1},8,["list","component-data"])]),_:1},8,["gutter","class"])),y("span",{class:"drawing-item-copy",title:"复制",onClick:i[2]||(i[2]=g(s=>r(e.element),["stop"]))},[b(I,null,{default:d(()=>[b(q)]),_:1})]),y("span",{class:"drawing-item-delete",title:"删除",onClick:i[3]||(i[3]=g(s=>w(e.index),["stop"]))},[b(I,null,{default:d(()=>[b(S)]),_:1})])]),_:1},8,["span","class"])}}});export{K as default};
