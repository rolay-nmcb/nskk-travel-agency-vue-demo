import{_ as C,C as I,d as A,u as q,a as P,r as _,v as x,w as $,c as i,f as e,k as h,m as S,A as u,G as f,s as w,t as D,o as m}from"./index-Lq3EucIc.js";import{p as N}from"./userOrders-BIeY2I1m.js";const V="/nskk-travel-agency-vue-demo/static/WechatPay-CdSbDn8a.png",B="/nskk-travel-agency-vue-demo/static/AliPay-Cf36-prV.png",a=r=>(w("data-v-7bd10572"),r=r(),D(),r),M={class:"payment-container"},O=a(()=>e("i",{class:"icon-back"},"←",-1)),R=a(()=>e("h1",null,"订单支付",-1)),W={class:"order-info-card"},j={class:"order-item"},z=a(()=>e("span",{class:"label"},"订单编号",-1)),E={class:"value"},F={class:"order-item"},G=a(()=>e("span",{class:"label"},"支付金额",-1)),T={class:"value amount"},U={class:"payment-method-section"},H=a(()=>e("h2",null,"选择支付方式",-1)),J={class:"method-options"},K=a(()=>e("img",{src:V,alt:"微信支付",class:"method-icon"},null,-1)),L=a(()=>e("span",{class:"method-name"},"微信支付",-1)),X={key:0,class:"check-icon"},Y=a(()=>e("img",{src:B,alt:"支付宝支付",class:"method-icon"},null,-1)),Z=a(()=>e("span",{class:"method-name"},"支付宝支付",-1)),Q={key:0,class:"check-icon"},ee={key:0,class:"qr-code-section"},se={class:"qr-code-container"},te=["src","alt"],ae={class:"amount-reminder"},oe={class:"action-buttons"},ne=["disabled"],ce=I({name:"payment"}),le=Object.assign(ce,{setup(r){const{proxy:d}=A(),l=q(),k=P(),c=_(null),n=_(null),s=_("");x(()=>{l.query.orderId&&(c.value=l.query.orderId),l.query.paymentAmount&&(n.value=l.query.paymentAmount)}),$(()=>l.query,t=>{t.orderId&&t.orderId!==c.value&&(c.value=t.orderId),t.paymentAmount&&t.paymentAmount!==n.value&&(n.value=t.paymentAmount)});const p=t=>t?`¥${Number(t).toFixed(2)}`:"¥0.00",b=async()=>{if(!s.value)return;const t={orderId:c.value,amount:n.value,paymentMethod:s.value};N(t).then(o=>{o.code===200?(d.$message.success("支付成功！"),y(),d.$router.push({path:"/userProduct/userProducts"})):(d.$message.error("支付失败，请重试"),console.error("支付失败:",error))}).catch(o=>{d.$message.error("支付失败，请重试"),console.error("支付失败:",o)})},v=()=>{y(),k.back()},y=()=>{c.value=null,n.value=null,s.value=""};return(t,o)=>(m(),i("div",M,[e("div",{class:"payment-header"},[e("button",{class:"back-btn",onClick:v},[O,S(" 返回 ")]),R]),e("div",W,[e("div",j,[z,e("span",E,u(c.value),1)]),e("div",F,[G,e("span",T,u(p(n.value)),1)])]),e("div",U,[H,e("div",J,[e("div",{class:f(["method-item",{active:s.value==="wechat"}]),onClick:o[0]||(o[0]=g=>s.value="wechat")},[K,L,s.value==="wechat"?(m(),i("i",X,"✓")):h("",!0)],2),e("div",{class:f(["method-item",{active:s.value==="alipay"}]),onClick:o[1]||(o[1]=g=>s.value="alipay")},[Y,Z,s.value==="alipay"?(m(),i("i",Q,"✓")):h("",!0)],2)])]),s.value?(m(),i("div",ee,[e("h2",null,"请使用"+u(s.value==="wechat"?"微信":"支付宝")+"扫描二维码支付",1),e("div",se,[e("img",{src:s.value==="wechat"?"/src/assets/images/WechatPay.png":"/src/assets/images/AliPay.png",alt:s.value==="wechat"?"微信支付二维码":"支付宝支付二维码",class:"qr-code-img"},null,8,te)]),e("p",ae,"支付金额："+u(p(n.value)),1)])):h("",!0),e("div",oe,[e("button",{class:"cancel-btn",onClick:v},"取消支付"),e("button",{class:"confirm-btn",onClick:b,disabled:!s.value}," 我已完成支付 ",8,ne)])]))}}),ie=C(le,[["__scopeId","data-v-7bd10572"]]);export{ie as default};
