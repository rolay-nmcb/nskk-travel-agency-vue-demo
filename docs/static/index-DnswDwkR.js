import{_ as M,C as $,d as B,u as F,r as d,y as N,v as V,e as b,c as j,o as q,f as e,h as r,i as n,m as h,G as u,A as v,s as H,t as J}from"./index-Lq3EucIc.js";import{g as K,b as Q,c as U,d as W,e as X}from"./statistics-BSassdL5.js";import{i as m,L as Y}from"./index-DHn3SkNy.js";const c=f=>(H("data-v-d7f832a1"),f=f(),J(),f),Z={class:"statistics-container"},ee={class:"page-header"},te=c(()=>e("h1",{class:"page-title"},"营业数据统计",-1)),ae={class:"time-filter"},se={class:"stats-cards"},oe=c(()=>e("div",{class:"card-icon order-icon"},[e("i",{class:"el-icon-s-order"})],-1)),le={class:"card-content"},re=c(()=>e("div",{class:"card-title"},"完成订单数",-1)),ne={class:"card-value"},ce=c(()=>e("div",{class:"card-icon revenue-icon"},[e("i",{class:"el-icon-money"})],-1)),ie={class:"card-content"},de=c(()=>e("div",{class:"card-title"},"总营业额 (元)",-1)),ue={class:"card-value"},ve=c(()=>e("div",{class:"card-icon average-icon"},[e("i",{class:"el-icon-shopping-cart"})],-1)),_e={class:"card-content"},he=c(()=>e("div",{class:"card-title"},"平均订单金额 (元)",-1)),pe={class:"card-value"},fe={class:"charts-container"},ye={slot:"header",class:"chart-header"},me=c(()=>e("span",null,"近七日销售额趋势",-1)),ge=c(()=>e("i",{class:"el-icon-info"},null,-1)),we={class:"chart-wrapper"},xe={slot:"header",class:"chart-header"},Se=c(()=>e("span",null,"近12个月销售额趋势",-1)),be=c(()=>e("i",{class:"el-icon-info"},null,-1)),Ce={class:"chart-wrapper"},Te={slot:"header",class:"chart-header"},Le=c(()=>e("span",null,"最畅销产品TOP5",-1)),ke=c(()=>e("i",{class:"el-icon-info"},null,-1)),Ae={class:"chart-wrapper"},ze={slot:"header",class:"chart-header"},Pe=c(()=>e("span",null,"评分低于2.5的产品",-1)),De=c(()=>e("i",{class:"el-icon-info"},null,-1)),Ee={class:"chart-wrapper"},Oe=$({name:"statistics"}),Ie=Object.assign(Oe,{setup(f){const{proxy:Re}=B();F();const i=d("today"),p=d();function A(){K().then(t=>{p.value=t.data})}const g=d();async function z(){const t=await Q();g.value=t.data,O()}const w=d();async function P(){const t=await U();w.value=t.data,I()}const x=d();async function D(){const t=await W();x.value=t.data,R()}const y=d();async function E(){const t=await X();y.value=t.data,G()}const l=N(()=>{if(!p.value)return{orderCount:0,revenue:0,averageOrder:0,orderTrend:0,revenueTrend:0,averageTrend:0};if(i.value==="today")return p.value.today;if(i.value==="yesterday")return p.value.yesterday;if(i.value==="week")return p.value.week;if(i.value==="month")return p.value.month}),C=d(null),T=d(null),L=d(null),k=d(null),O=()=>{var o,a;const t=m(C.value),s={tooltip:{trigger:"axis",formatter:"{b}: {c}元"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:((o=g.value)==null?void 0:o.dates)||[]},yAxis:{type:"value",axisLabel:{formatter:"{value} 元"}},series:[{name:"销售额",type:"line",data:((a=g.value)==null?void 0:a.sales)||[],smooth:!0,lineStyle:{width:3},itemStyle:{radius:6},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(64, 158, 255, 0.3)"},{offset:1,color:"rgba(64, 158, 255, 0)"}]}}}]};t.setOption(s),window.addEventListener("resize",()=>{t.resize()})},I=()=>{var o,a;const t=m(T.value),s={tooltip:{trigger:"axis",formatter:"{b}: {c}元"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:((o=w.value)==null?void 0:o.dates)||[]},yAxis:{type:"value",axisLabel:{formatter:"{value} 元"}},series:[{name:"月销售额",type:"line",data:((a=w.value)==null?void 0:a.sales)||[],smooth:!0,lineStyle:{width:3,color:"#67C23A"},itemStyle:{color:"#67C23A",radius:6},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(103, 194, 58, 0.3)"},{offset:1,color:"rgba(103, 194, 58, 0)"}]}}}]};t.setOption(s),window.addEventListener("resize",()=>{t.resize()})},R=()=>{var o,a;const t=m(L.value),s={tooltip:{trigger:"axis",formatter:"{b}: {c} 单"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"value",axisLabel:{formatter:"{value} 单"}},yAxis:{type:"category",data:((o=x.value)==null?void 0:o.names)||[],inverse:!0},series:[{name:"订单量",type:"bar",data:((a=x.value)==null?void 0:a.sales)||[],itemStyle:{color:new Y(0,0,1,0,[{offset:0,color:"#409EFF"},{offset:1,color:"#69b1ff"}])},label:{show:!0,position:"right",formatter:"{c} 单"}}]};t.setOption(s),window.addEventListener("resize",()=>{t.resize()})},G=()=>{var o,a,_;const t=m(k.value),s={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:((o=y.value)==null?void 0:o.names)||[]},yAxis:[{type:"value",name:"订单量",position:"left",axisLabel:{formatter:"{value} 单"}},{type:"value",name:"评分",position:"right",min:0,max:5,interval:1,axisLabel:{formatter:"{value} 分"}}],series:[{name:"订单量",type:"bar",data:((a=y.value)==null?void 0:a.sales)||[],itemStyle:{color:"#F56C6C"}},{name:"评分",type:"line",yAxisIndex:1,data:((_=y.value)==null?void 0:_.ratings)||[],lineStyle:{color:"#E6A23C"},itemStyle:{color:"#E6A23C",radius:6},label:{show:!0,formatter:"{c} 分"}}]};t.setOption(s),window.addEventListener("resize",()=>{t.resize()})};return V(()=>{A(),z(),P(),D(),E(),i.value="today"}),(t,s)=>{const o=b("el-button"),a=b("el-card"),_=b("el-tooltip");return q(),j("div",Z,[e("div",ee,[te,e("div",ae,[r(o,{class:u({active:i.value==="today"}),onClick:s[0]||(s[0]=S=>i.value="today"),size:"small"},{default:n(()=>[h(" 今日 ")]),_:1},8,["class"]),r(o,{class:u({active:i.value==="yesterday"}),onClick:s[1]||(s[1]=S=>i.value="yesterday"),size:"small"},{default:n(()=>[h(" 昨日 ")]),_:1},8,["class"]),r(o,{class:u({active:i.value==="week"}),onClick:s[2]||(s[2]=S=>i.value="week"),size:"small"},{default:n(()=>[h(" 近一周 ")]),_:1},8,["class"]),r(o,{class:u({active:i.value==="month"}),onClick:s[3]||(s[3]=S=>i.value="month"),size:"small"},{default:n(()=>[h(" 近一个月 ")]),_:1},8,["class"])])]),e("div",se,[r(a,{class:"stat-card"},{default:n(()=>[oe,e("div",le,[re,e("div",ne,v(l.value.orderCount),1),e("div",{class:u(["card-change",l.value.orderTrend>0?"up":"down"])},[e("i",{class:u(l.value.orderTrend>0?"el-icon-caret-top":"el-icon-caret-bottom")},null,2),h(" "+v(l.value.orderTrend>0?"+":"")+v(l.value.orderTrend*100)+"% ",1)],2)])]),_:1}),r(a,{class:"stat-card"},{default:n(()=>[ce,e("div",ie,[de,e("div",ue,v(l.value.revenue.toLocaleString()),1),e("div",{class:u(["card-change",l.value.revenueTrend>0?"up":"down"])},[e("i",{class:u(l.value.revenueTrend>0?"el-icon-caret-top":"el-icon-caret-bottom")},null,2),h(" "+v(l.value.revenueTrend>0?"+":"")+v(l.value.revenueTrend*100)+"% ",1)],2)])]),_:1}),r(a,{class:"stat-card"},{default:n(()=>[ve,e("div",_e,[he,e("div",pe,v(l.value.averageOrder.toLocaleString()),1),e("div",{class:u(["card-change",l.value.averageTrend>0?"up":"down"])},[e("i",{class:u(l.value.averageTrend>0?"el-icon-caret-top":"el-icon-caret-bottom")},null,2),h(" "+v(l.value.averageTrend>0?"+":"")+v(l.value.averageTrend*100)+"% ",1)],2)])]),_:1})]),e("div",fe,[r(a,{class:"chart-card"},{default:n(()=>[e("div",ye,[me,r(_,{content:"展示最近7天的销售额变化情况"},{default:n(()=>[ge]),_:1})]),e("div",we,[e("div",{ref_key:"salesTrendChart",ref:C,class:"chart"},null,512)])]),_:1}),r(a,{class:"chart-card"},{default:n(()=>[e("div",xe,[Se,r(_,{content:"展示最近12个月的销售额变化情况"},{default:n(()=>[be]),_:1})]),e("div",Ce,[e("div",{ref_key:"monthlySalesChart",ref:T,class:"chart"},null,512)])]),_:1}),r(a,{class:"chart-card"},{default:n(()=>[e("div",Te,[Le,r(_,{content:"展示订单量最高的5款产品"},{default:n(()=>[ke]),_:1})]),e("div",Ae,[e("div",{ref_key:"topProductsChart",ref:L,class:"chart"},null,512)])]),_:1}),r(a,{class:"chart-card"},{default:n(()=>[e("div",ze,[Pe,r(_,{content:"展示评分较低的产品及其订单量"},{default:n(()=>[De]),_:1})]),e("div",Ee,[e("div",{ref_key:"lowRatingChart",ref:k,class:"chart"},null,512)])]),_:1})])])}}}),Be=M(Ie,[["__scopeId","data-v-d7f832a1"]]);export{Be as default};
